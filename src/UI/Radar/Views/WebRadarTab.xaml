<UserControl x:Class="EftDmaRadarLite.UI.Radar.Views.WebRadarTab"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:EftDmaRadarLite.UI.Radar.ViewModels"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:EftDmaRadarLite.UI.Radar.Views"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             Padding="10">

    <d:UserControl.DataContext>
        <d:DesignInstance Type="{x:Type vm:WebRadarViewModel}"
                          IsDesignTimeCreatable="False" />
    </d:UserControl.DataContext>

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Orientation="Vertical"
                    Margin="0,0,0,10">

            <!-- Web Radar Server -->
            <GroupBox Header="Web Radar Server"
                      Margin="0,0,0,12">
                <StackPanel>

                    <!-- Controls row  -->
                    <WrapPanel Margin="0,8,0,8">

                        <!-- Start -->
                        <Button Content="{Binding StartButtonText}"
                                IsEnabled="{Binding UiEnabled}"
                                ToolTip="Start the embedded web server."
                                Command="{Binding StartServerCommand}"
                                MinWidth="80"
                                Height="35"
                                Margin="8,0,12,8" />

                        <!-- UPnP -->
                        <CheckBox Content="UPnP"
                                  IsEnabled="{Binding UiEnabled}"
                                  ToolTip="Automatically open the port on your router using UPnP (if supported)."
                                  IsChecked="{Binding UpnpEnabled, Mode=TwoWay}"
                                  Margin="0,0,16,8" />

                        <!-- Bind IP/Host -->
                        <TextBlock Text="Bind IP/Host"
                                   VerticalAlignment="Center"
                                   Margin="0,0,4,8"
                                   ToolTip="Interface or hostname to bind. Use 0.0.0.0 to listen on all interfaces." />
                        <TextBox Width="150"
                                 Margin="0,0,12,8"
                                 ToolTip="Interface or hostname to bind. Use 0.0.0.0 to listen on all interfaces."
                                 IsEnabled="{Binding UiEnabled}"
                                 Text="{Binding BindAddress, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                        <!-- Port -->
                        <TextBlock Text="Port"
                                   ToolTip="TCP Port to listen on. This will need to be forwarded in your router, or via UPnP."
                                   VerticalAlignment="Center"
                                   Margin="0,0,4,8" />
                        <TextBox Width="80"
                                 Margin="0,0,12,8"
                                 ToolTip="TCP Port to listen on. This will need to be forwarded in your router, or via UPnP."
                                 IsEnabled="{Binding UiEnabled}"
                                 Text="{Binding Port, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                        <!-- Tick Rate -->
                        <TextBlock Text="Tick Rate (hz)"
                                   ToolTip="Broadcast rate (per second) for Web Radar Updates."
                                   VerticalAlignment="Center"
                                   Margin="0,0,4,8" />
                        <TextBox Width="80"
                                 ToolTip="Broadcast rate (per second) for Web Radar Updates."
                                 Margin="0,0,12,8"
                                 IsEnabled="{Binding UiEnabled}"
                                 Text="{Binding TickRate, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                        <!-- Password -->
                        <TextBlock Text="Password"
                                   VerticalAlignment="Center"
                                   ToolTip="Password required by clients."
                                   Margin="0,0,4,8" />
                        <TextBox Width="140"
                                 IsReadOnly="True"
                                 Margin="0,0,12,8"
                                 ToolTip="Password required by clients."
                                 IsEnabled="{Binding UiEnabled}"
                                 Text="{Binding Password, Mode=OneWay, UpdateSourceTrigger=Default}" />

                        <!-- URL (clickable + actions) -->
                        <TextBlock VerticalAlignment="Center"
                                   Margin="0,0,6,8">
                            <Hyperlink Command="{Binding CopyUrlCommand}"
                                       ToolTip="Copy Web Radar URL to Clipboard.">
                                <Run Text="{Binding ServerUrl}" />
                            </Hyperlink>
                        </TextBlock>
                    </WrapPanel>
                    
                    <!-- Help text -->
                    <TextBlock TextWrapping="Wrap"
                               Margin="4,4,4,8">
                        If Bind IP/Host is empty the server won’t start. Use 0.0.0.0 to expose to LAN.<LineBreak />
                        Keep the port open on your router. UPnP will try to create a router mapping if available.<LineBreak />
                        If your friend is connecting to the Web Radar using https, they will need to allow mixed content (http/https) in their browser. We recommend connecting with HTTP only.
                    </TextBlock>
                </StackPanel>
            </GroupBox>

        </StackPanel>
    </ScrollViewer>
</UserControl>
